schema: '2.0'
stages:
  build_frontend:
    cmd: docker build -t nidhogg-frontend -f docker/frontend.Dockerfile .
    deps:
    - path: docker/frontend.Dockerfile
      md5: f9f13a5601c94d57ffa932c67e76e01e
      size: 660
    - path: poetry.lock
      md5: 5bb117013faa6b076da07b81efa3457b
      size: 192281
    - path: src/frontend/
      md5: 4d1dd56a52a8241260df553dde3fa96b.dir
      size: 2114
      nfiles: 3
  train:
    cmd: poetry run python3 src/train_model.py data/ outputs/nltk_corpora/ outputs/models/
      outputs/metrics/
    deps:
    - path: data/
      md5: 04b4208aa8d7923f28b0679961fd6ff8.dir
      size: 10408949
      nfiles: 4
    - path: src/common/
      md5: acce6b7778f1e8ae618ac1ff3a5e21ea.dir
      size: 3490
      nfiles: 4
    - path: src/train_model.py
      md5: 2660f5588ff26344a532836484c7dcb4
      size: 4897
    outs:
    - path: outputs/metrics/model_metrics.json
      md5: 8480f43bdac381f40210a9253dd8993b
      size: 95
    - path: outputs/models/
      md5: 4e095fde1f25e2de0af6f4874909f999.dir
      size: 27782373
      nfiles: 3
    - path: outputs/nltk_corpora/
      md5: 0f5ffa2f0ac78640a89e95ee348f9e98.dir
      size: 90497
      nfiles: 26
  build_inference:
    cmd: docker build -t nidhogg-inference -f docker/inference.Dockerfile .
    deps:
    - path: docker/inference.Dockerfile
      md5: 806ec508c30e792bcc9e968d0d3583fb
      size: 758
    - path: outputs/models/tfidf_model.pkl
      md5: b9bbf15a8908d4e5f0558ffd402fdc6c
      size: 21741915
    - path: outputs/models/vectorizer.pkl
      md5: 0e048fd30f44a71d63fde07e0cfbce0f
      size: 6039674
    - path: poetry.lock
      md5: 5bb117013faa6b076da07b81efa3457b
      size: 192281
    - path: src/common/
      md5: acce6b7778f1e8ae618ac1ff3a5e21ea.dir
      size: 3490
      nfiles: 4
    - path: src/inference.py
      md5: 4085ef8ab9be6ec53f9c45d69922a4f3
      size: 1536
  build_alertmetrics:
    cmd: docker build -t alertmetrics -f docker/alertmetrics.Dockerfile .
    deps:
    - path: docker/alertmetrics.Dockerfile
      md5: e4cfdd75f91c303e7cc852b50b064346
      size: 668
    - path: poetry.lock
      md5: 5bb117013faa6b076da07b81efa3457b
      size: 192281
    - path: src/alertmetrics/
      md5: ceedf5e4d16a8b36f3f8cf09085db5f4.dir
      size: 3027
      nfiles: 4
